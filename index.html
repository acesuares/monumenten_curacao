<!DOCTYPE html> 
<html> 
	<head> 
	<title>Monumentenapp</title> 

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
	
	
	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="leaflet.css" />
	<link rel="stylesheet" href="themes/monumenten-app.css" />
	
	<!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" /> -->
	
	
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile.structure-1.3.2.min.css" />
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
	<script src="js/map.js"></script>
	<script src="leaflet.js"></script>

	<link rel="stylesheet" href="MarkerCluster.css" />
	<link rel="stylesheet" href="MarkerCluster.Default.css" />
	<script src="leaflet.markercluster-src.js"></script>


    
</head> 
<body> 

<div data-role="page" data-theme="a" id="mapIndex">

	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-fullscreen="false" data-theme="a">
		<a href="#settings" data-icon="delete">settings</a>
		    <h1>Monumenten</h1>
		<a href="#routes" data-icon="check" data-transition="slide">routes</a>
	</div><!-- /header -->

	<div data-role="content" data-theme="a">	
    
    	<div id="map"></div>
		<script>

	  		function onFeatureClick(e) {
				// Feature properties of marker:
				var properties = e.target.options.properties;
				// Doe iets!
				$('#infoHeader').html(e.target.options.properties.name);
				$('#infoContent').html(e.target.options.properties.characteristics)
				
				var str=e.target.options.properties.photo_url;
				var n=str.replace( "http://www.curacaomonuments.org","http://199.236.83.254" );
				console.log(n),
				$("#infoImage").attr("src", n);
				$(location).attr('href', '#info');

			}
    
	    	$(document).ready(function() {
				
        		initMap();
				var outdiv = $('<div data-role="collapsible-set" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d"></div>');
	      		$.getJSON('https://rawgithub.com/bertspaan/monumenten_curacao/master/monuments.json', function(data) {

					jsonMonuments = data;
					addMapData('monuments', data);

					var innerdiv = $('<div data-role="collapsible" ></div>');

					innerdiv.append('<h3>Monuments</h3>');
					var list = $('<ul data-role="listview" data-divider-theme="b" data-inset="true">');
					innerdiv.append(list);
						
					for (var i = 0; i < data.features.length; i++) {
						var feature = data.features[i];

						var li=$('<li data-theme="a">');
						var a=$('<a href="#mapIndex" data-transition="slide">'+feature.properties.name+'</a>')

						li.append(a);
						list.append(li);
					}
					
					outdiv.append(innerdiv);
				  	outdiv.appendTo('#output');
					$('#output [data-role=collapsible-set]').collapsibleset();					
					
        		});
	      		$.getJSON('https://rawgithub.com/bertspaan/monumenten_curacao/master/museums.json', function(data) {
          			museumMonuments=data;
					addMapData('museums', data);

        		});


			});
		</script>
	</div>


</div>

<div data-role="page" data-theme="a" id="routes">

	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-fullscreen="false" data-theme="a">
		<a href="#mapIndex" data-icon="delete">back</a>
		    <h1>Routes</h1>
	</div><!-- /header -->

	<div data-role="content">
		<div id="output"></div>
	</div><!-- /content -->

</div>

<div data-role="page" data-theme="a" id="info">

	<div data-theme="a" data-role="header">
          <a data-role="button" href="#mapIndex" class="ui-btn-left" data-icon="delete">
              back
          </a>
          <h3>
              Monument Info
          </h3>
      </div>
      <div data-role="content">
      <h1 id="infoHeader">Bargestraat, nr 28</h1>
		<hr style="color:white">
          <div style="" data-controltype="image">
              <img id="infoImage" style="width: 400px; height: 266px" src="http://199.236.83.254/getphoto.php?photo_id=414">
          </div>
		<hr style="color:white">
          <div data-controltype="textblock">
              <p id="infoContent">

                      Dit fraaie huis ligt op het westen met een spandak van twee zadelnokken
                      en een balkondeur van echt grenenhout. De onderste twee bouwlangen schijnnen
                      niet zichtbaar te zijn naaar dat geeft ook niks hoor

              </p>
          </div>
      </div>

</div>


<div data-role="page" data-theme="a" id="settings">

	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-fullscreen="false" data-theme="a">
		<a href="#mapIndex" data-icon="delete">back</a>
		    <h1>Settings</h1>
	</div><!-- /header -->

	<div data-role="content" data-theme="a">	

	</div><!-- /content -->


</div>


</body>
</html>