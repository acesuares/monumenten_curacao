<!DOCTYPE html> 
<html> 
	<head> 
	<title>Monumentenapp</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="leaflet.css" />
	<link rel="stylesheet" href="themes/monumenten-app.css" />
	<!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" /> -->
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile.structure-1.3.2.min.css" />
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
	<script src="js/map.js"></script>
	<script src="leaflet.js"></script>

	<link rel="stylesheet" href="MarkerCluster.css" />
	<link rel="stylesheet" href="MarkerCluster.Default.css" />
	<script src="leaflet.markercluster-src.js"></script>
</head> 
<body> 

<div data-role="page" data-theme="a" id="mapIndex">

	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-fullscreen="false" data-theme="a">
		<a href="#routes" data-icon="check" data-transition="slide">Routes</a>
		    <h1>Monumenten</h1>
	</div><!-- /header -->

	<div data-role="content" data-theme="a">	
    
    	<div id="map"></div>
		<script>

	    function onFeatureClick(e) {
				// Feature properties of marker:
				var properties = e.target.options.properties;
				// Doe iets!
				$(location).attr('href', '#info');
				//alert(properties.name);
			}
    
	    	$(document).ready(function() {
				
        		initMap();
				var outdiv = $('<div data-role="collapsible-set" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d"></div>');
	      		$.getJSON('https://rawgithub.com/bertspaan/monumenten_curacao/master/monuments.json', function(data) {

					jsonMonuments = data;
					addMapData('monuments', data);

					var innerdiv = $('<div data-role="collapsible" ></div>');

					innerdiv.append('<h3>Monuments</h3>');
					var list = $('<ul data-role="listview" data-divider-theme="b" data-inset="true">');
					innerdiv.append(list);
						
					for (var i = 0; i < data.features.length; i++) {
						var feature = data.features[i];

						var li=$('<li data-theme="a">');
						var a=$('<a href="#mapIndex" data-transition="slide">'+feature.properties.name+'</a>')

						li.append(a);
						list.append(li);
					}
					
					outdiv.append(innerdiv);
				  	outdiv.appendTo('#output');
					$('#output [data-role=collapsible-set]').collapsibleset();					
					
        		});
	      		$.getJSON('https://rawgithub.com/bertspaan/monumenten_curacao/master/museums.json', function(data) {
          			museumMonuments=data;
					addMapData('museums', data);

        		});


			});
		</script>
	</div>


</div>

<div data-role="page" data-theme="a" id="routes">

	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-fullscreen="false" data-theme="a">
		<a href="#mapIndex" data-icon="delete">Back</a>
		    <h1>Routes</h1>
	</div><!-- /header -->

	<div data-role="content">
		<div id="output"></div>
	</div><!-- /content -->

</div>

<div data-role="page" data-theme="a" id="info">

	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-fullscreen="false" data-theme="a">
		<a href="#mapIndex" data-icon="delete">back</a>
		    <h1>Information</h1>
	</div><!-- /header -->
	<div data-role="content" data-theme="a">
	</div><!-- /content -->
</div>



</body>
</html>